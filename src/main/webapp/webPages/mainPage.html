<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <div>Welcome to the main page</div>
        <form id="goToSessionPageForm" method="GET">
            <input type="submit" value ="Go to session test page">
        </form>
        
        <form id="testPage" method="GET" action = "/fitness_tracker_servlet_maven/FrontControllerServlet/testDatabase">
            <input type="submit" value ="Go to database test page">
        </form>
        
        <form id="logoutForm" method="POST">
            <input type="submit" value ="Logout">
        </form>
        
        <script type="text/javascript" src="../js/ServerAPI.js"></script>
        <!--<script type="text/javascript">
        window.onload = function()
        {
            //set form actions from ServerAPI
            document.getElementById("goToSessionPageForm").action = frontController+sessionPlaceholderPageRequest;
            document.getElementById("logoutForm").action = frontController+logoutRequest;

        };
        </script>-->
        
        <script type="text/javascript">
        window.onload = function()
        {
            
            //here we get the jsessionID if there is one and attach it to each form attribute
            var currentURL = window.location.href;
            var jsessionidSearchParameter = ";jsessionid=";
            var jsessionidLocation = currentURL.search(jsessionidSearchParameter);
            var jsessionid="";
            if(jsessionidLocation === -1)
            {
                //no jSessionID found
            }
            else
            {
                jsessionid = currentURL.substring(jsessionidLocation);
            }
            
            //set form actions from ServerAPI
            document.getElementById("goToSessionPageForm").action = frontController+sessionPlaceholderPageRequest+jsessionid;
            document.getElementById("testPage").action = frontController+testDatabase+jsessionid;
            document.getElementById("logoutForm").action = frontController+logoutRequest+jsessionid;
            
            //just for testing
            document.getElementById("output").innerHTML = "session page form request: " + document.getElementById("goToSessionPageForm").action.toString();

        };
        
        </script>
        <p id="output"></p>
        
    </body>
</html>
