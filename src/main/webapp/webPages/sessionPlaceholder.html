<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    
    <body>
        <div>Session test page! Should only appear for a valid session.</div>
        <form id="goToMainPageForm" method="GET">
            <input type="submit" value ="Back to main page">
            <input type="hidden" name="jsessionid">
        </form>
        <form id="logoutForm" method="POST">
            <input type="submit" value ="Logout">
            <input type="hidden" name="jsessionid">
        </form>
        
        <script type="text/javascript" src="../ServerAPI.js"></script>
        <script type="text/javascript">
        window.onload = function()
        {
            //set form actions from ServerAPI
            document.getElementById("goToMainPageForm").action = frontController+mainPageRequest;
            document.getElementById("logoutForm").action = frontController+logoutRequest;
            
            //here we get the jsessionID if there is one and attach it to each form attribute
            var currentURL = window.location.href;
            var jsessionidSearchParameter = ";jsessionid=";
            var jsessionidLocation = currentURL.search(jsessionidSearchParameter);
            if(jsessionidLocation === -1)
            {
                //no jSessionID found
            }
            else
            {
                var jsessionid = currentURL.substring(jsessionidLocation);
                
                var elementsList = document.getElementsByName("jsessionid");

                for(var count = 0; count < elementsList.length;count++)
                {
                    elementsList[count].value = jsessionid;
                }
            }
        };
        </script>
    </body>
</html>
