<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!--The following 4 imports will likely be needed on most pages-->
        <!--jquery import-->
        <script type ="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
        <!--bootstrap import-->
        <script type="text/javascript" src="../bootstrap-3.3.4-dist/js/bootstrap.min.js"></script>
        <!--ServerAPI import-->
        <script type="text/javascript" src="../js/ServerAPI.js"></script>
        <!--icon-->
        <link rel="icon" href="../icons/favicon.ico">
    </head>
    
    <body>      
        <div>Session test page! Should only appear for a valid session.</div>
        <form id="goToMainPageForm" method="GET">
            <input type="submit" value ="Back to main page">
        </form>
        <form id="logoutForm" method="POST">
            <input type="submit" value ="Logout">
        </form>
        
        <!--<script type="text/javascript">
        window.onload = function()
        {
            //set form actions from ServerAPI
            document.getElementById("goToMainPageForm").action = frontController+mainPageRequest;
            document.getElementById("logoutForm").action = frontController+logoutRequest;
        };
        </script>-->
        
        
        <script type="text/javascript">
        window.onload = function()
        {
            
            //here we get the jsessionID if there is one and attach it to each form attribute
            var currentURL = window.location.href;
            var jsessionidSearchParameter = ";jsessionid=";
            var jsessionidLocation = currentURL.search(jsessionidSearchParameter);
            var jsessionid="";
            if(jsessionidLocation === -1)
            {
                //no jSessionID found
            }
            else
            {
                jsessionid = currentURL.substring(jsessionidLocation);
            }
            
            //set form actions from ServerAPI
            document.getElementById("goToMainPageForm").action = frontController+mainPageRequest+jsessionid;
            document.getElementById("logoutForm").action = frontController+logoutRequest+jsessionid;
        };
        </script>
    </body>
</html>
